USE paj1810;

CREATE TABLE BANK
(
CODE CHAR(3)NOT NULL, 
NAME VARCHAR (20)NOT NULL,
ADDR VARCHAR (50),
PRIMARY KEY(CODE)
);


CREATE TABLE BANK_BRANCH
(
BCODE CHAR(3)NOT NULL, 
BRANCHNO INT NOT NULL, 
ADDR VARCHAR(50),
PRIMARY KEY(BRANCHNO),
FOREIGN KEY(BCODE) REFERENCES BANK(CODE)
);


CREATE TABLE CUSTOMER
(
SSN CHAR(09)NOT NULL, 
NAME VARCHAR(30)NOT NULL, 
PHONE INT(10), 
ADDR VARCHAR (50),
PRIMARY KEY(SSN)
);

CREATE TABLE LOAN
(
	LOANNO INT NOT NULL, 
	AMOUNT INT, 
	TYPE VARCHAR (20), 
	BCODE CHAR(3) NOT NULL, 
	BNO INT NOT NULL,
	PRIMARY KEY(LOANNO),
	FOREIGN KEY(BCODE) REFERENCES BANK(CODE),
	FOREIGN KEY(BNO) REFERENCES BANK_BRANCH(BRANCHNO)
);

CREATE TABLE ACCOUNT
(
	ACCTNO INT NOT NULL, 
	BALANCE INT, 
	TYPE VARCHAR(20), 
	BCODE CHAR(3)NOT NULL, 
	BNO INT NOT NULL,
	PRIMARY KEY(ACCTNO),
	FOREIGN KEY(BNO) REFERENCES BANK_BRANCH(BRANCHNO),
	FOREIGN KEY(BCODE) REFERENCES BANK(CODE)
);


CREATE TABLE ACCOUNT_CUSTOMER
(
	SSN CHAR(9) NOT NULL, 
	ACCTNO INT NOT NULL,
	PRIMARY KEY(SSN, ACCTNO),
	FOREIGN KEY(ACCTNO) REFERENCES ACCOUNT(ACCTNO)
);

CREATE TABLE LOAN_CUSTOMER
(
	SSN CHAR(9)NOT NULL,
	LOANNO INT NOT NULL,
	PRIMARY KEY(SSN, LOANNO),
	FOREIGN KEY(LOANNO) REFERENCES LOAN(LOANNO)
);


